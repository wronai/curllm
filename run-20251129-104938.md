# curllm Run Log (20251129-104938)

## Navigation

- [curllm run: 2025-11-29T10:49:38.182114](#curllm-run-2025-11-29t104938182114)

```bash
curllm "https://ceneo.pl" -d "Extract products under 100"
```

- **URL**: https://ceneo.pl
- **Instruction**: Extract products under 100


---

## curllm run: 2025-11-29T10:49:38.182114

- CURLLM_MODEL: qwen2.5:7b
- CURLLM_OLLAMA_HOST: http://localhost:11434
- VISUAL_MODE: False
- STEALTH_MODE: False
- USE_BQL: False
- CURLLM_LLM_FIELD_FILLER_ENABLED: True
- CURLLM_LLM_FIELD_MAX_ATTEMPTS: 2
- CURLLM_LLM_FIELD_TIMEOUT_MS: 5000
- CURLLM_INCLUDE_DOM_HTML: True
- CURLLM_DOM_MAX_CHARS: 60000
- CURLLM_DOM_MAX_CAP: 60000
- CURLLM_SMART_CLICK: True
- CURLLM_ACTION_TIMEOUT_MS: 22000
- CURLLM_WAIT_AFTER_CLICK_MS: 1800
- CURLLM_WAIT_AFTER_NAV_MS: 3000
- CURLLM_NO_CLICK: False
- CURLLM_SCROLL_LOAD: True
- CURLLM_FASTPATH: False
- CURLLM_REFINE_INSTRUCTION: False
- CURLLM_USE_EXTERNAL_SLIDER_SOLVER: True
- CURLLM_STALL_LIMIT: 9
- CURLLM_PLANNER_GROWTH_PER_STEP: 3000
- CURLLM_PLANNER_MAX_CAP: 60000
- CURLLM_PLANNER_BASE_CHARS: 111000
- CURLLM_STORE_RESULTS: False
- CURLLM_RESULT_KEY: 
- CURLLM_DIFF_MODE: none
- CURLLM_DIFF_FIELDS: ['href', 'title', 'url']
- CURLLM_KEEP_HISTORY: 10
- CURLLM_INCLUDE_PREV_RESULTS: False
- CURLLM_BROWSERLESS: False
- BROWSERLESS_URL: ws://localhost:3000
- CURLLM_MAX_STEPS: 20
- CURLLM_SCREENSHOT_DIR: screenshots
- CURLLM_DEBUG: False
- CURLLM_API_PORT: 8002
- CURLLM_NUM_CTX: 8192
- CURLLM_NUM_PREDICT: 512
- CURLLM_TEMPERATURE: 0.3
- CURLLM_TOP_P: 0.9
- CURLLM_LLM_TIMEOUT: 300
- CURLLM_HEADLESS: True
- CURLLM_LOCALE: pl-PL
- CURLLM_TIMEZONE: Europe/Warsaw
- CURLLM_PROXY: None
- CURLLM_VALIDATION: True
- CURLLM_HIERARCHICAL_PLANNER_CHARS: 35000
- CURLLM_VISION_FORM_ANALYSIS: True
- CURLLM_VISION_MODEL: llava:13b
- CURLLM_VISION_CONFIDENCE_THRESHOLD: 0.7
- CURLLM_VISION_DETECT_HONEYPOTS: True
- CURLLM_EXTRACTION_ORCHESTRATOR: True
- CURLLM_EXTRACTION_ORCHESTRATOR_TIMEOUT: 200
- CURLLM_BQL_EXTRACTION_ORCHESTRATOR: True
- CURLLM_BQL_EXTRACTION_ORCHESTRATOR_TIMEOUT: 120
- CURLLM_SEMANTIC_QUERY: True
- CURLLM_SEMANTIC_QUERY_TIMEOUT: 120
- CURLLM_ITERATIVE_EXTRACTOR: True
- CURLLM_ITERATIVE_EXTRACTOR_MAX_ITEMS: 50
- CURLLM_PROGRESSIVE_CONTEXT: True
- CURLLM_PROGRESSIVE_CONTEXT_INITIAL_SIZE: 5000
- CURLLM_LLM_GUIDED_EXTRACTOR: True
Browser context initialized.

- human_verify_main_text_match: False
- human_verify_clicked_on_nav: False
- accept_cookies: attempted
ü§ñ LLM-Guided Extractor enabled - LLM makes decisions at each atomic step


ü§ñ ‚ïê‚ïê‚ïê LLM-GUIDED ATOMIC EXTRACTOR ‚ïê‚ïê‚ïê


ü§ñ LLM Decision: Step 1: Identify Container Selector

   Analyzing DOM for price-containing elements...

ü§ñ LLM Decision: Found candidates with prices

```json
{
  "count": 10,
  "selectors": [
    ".layout-wrapper",
    ".box-row",
    ".box",
    ".carousel",
    ".recommendation",
    ".recommendation__body",
    ".lnd_object",
    ".lnd_wrapper",
    ".lnd_grid-items",
    ".js_content_paragraph"
  ]
}
```

ü§ñ LLM Decision: Container Selector Decision

```json
{
  "text": "{\"selector\": \".box-row\", \"reasoning\": \"The .box-row selector has the most relevant product names and prices, making it the best choice for extracting products under 100.\"}"
}
```

‚ö†Ô∏è LLM-Guided Extractor returned no data: LLM couldn't identify container

üîç Dynamic Detector enabled - adaptive pattern recognition

üîç Dynamic Detector: Starting dynamic pattern detection

üîç Dynamic Detector: Using fallback link selector

```json
{
  "selector": "a[href*=\"product\"], a[href*=\"item\"], a[href*=\"/p/\"], a[href*=\"/produkt\"], a[href$=\".html\"]"
}
```

üîç Dynamic Detector: Found 100 signal elements

üîç Dynamic Detector: Analyzed 3 parent structures

üîç Dynamic Detector: No clusters formed

‚ö†Ô∏è Dynamic Detector returned no data: No patterns detected

üîÑ Iterative Extractor enabled - trying atomic DOM queries


üîÑ ‚ïê‚ïê‚ïê ITERATIVE EXTRACTOR ‚ïê‚ïê‚ïê


üîç Step 1: Quick Page Check

   Running fast indicators check...

üîç Quick Check Results

```json
{
  "has_prices": true,
  "price_count": 443,
  "has_product_links": false,
  "product_link_count": 0,
  "has_list_structure": true,
  "has_add_to_cart": false,
  "has_price_images": true,
  "total_links": 931,
  "page_type": "product_listing",
  "real_product_containers": 48
}
```

üìä Decision: Page type: product_listing, real products: 48, prices: 443

üîç Step 2: Container Structure Detection

   Looking for product_listing containers...

üéØ Using Dynamic Container Detector (Statistical + LLM)

üîç Dynamic Container Detection Started

üìä Statistical Analysis

```json
{
  "recommended_depth": null,
  "confidence": 0.0,
  "reasoning": "Could not determine optimal depth from statistics"
}
```

üéØ Candidates Generated

```json
{
  "count": 10,
  "depths": [
    8,
    5,
    6,
    7
  ]
}
```

üìà Statistical Ranking

```json
{
  "top_3_scores": [
    84.61538461538461,
    54.1025641025641,
    53.717948717948715
  ]
}
```

‚ö†Ô∏è LLM validation failed: Expecting value: line 63 column 19 (char 1987)

üß† LLM Validation

```json
{
  "validated_count": 10,
  "valid_count": 10,
  "recommended": ".box-row"
}
```

‚úÖ Best Container Selected

```json
{
  "selector": ".box-row",
  "statistical_score": 84.61538461538461,
  "llm_confidence": null
}
```

üîç Container Detection Results

```json
{
  "found": true,
  "best": {
    "selector": ".box-row",
    "class_name": "box-row",
    "count": 15,
    "depth": 8,
    "has_price": true,
    "has_link": true,
    "has_image": true,
    "has_product_links": false,
    "cart_elements": 0,
    "product_score": 85,
    "sample_text": "Pan Materac Original Thermo 140x200\n\n\n\n \n\n\n\n\n\n\n (26)\n \n\n\n\nod1 481,40z≈Ç\n\n\n \n \n\n\nMOVA Z60 Ultra Roller Complete czarny\n\n\n\n \n\n\n\n\n\n\n (1)\n \n\n\n\nod3 849,00z≈Ç\n\n\n \n \n\n\nRoborock Saros 10R Czarny\n\n\n\n \n\n\n\n\n\n\n (3)",
    "avg_text_length": 149.86666666666667,
    "specificity": 2,
    "classes": "box-row",
    "statistical_score": 84.61538461538461,
    "combined_confidence": 0.6730769230769231
  },
  "candidates": [
    {
      "selector": ".box-row",
      "class_name": "box-row",
      "count": 15,
      "depth": 8,
      "has_price": true,
      "has_link": true,
      "has_image": true,
      "has_product_links": false,
      "cart_elements": 0,
      "product_score": 85,
      "sample_text": "Pan Materac Original Thermo 140x200\n\n\n\n \n\n\n\n\n\n\n (26)\n \n\n\n\nod1 481,40z≈Ç\n\n\n \n \n\n\nMOVA Z60 Ultra Roller Complete czarny\n\n\n\n \n\n\n\n\n\n\n (1)\n \n\n\n\nod3 849,00z≈Ç\n\n\n \n \n\n\nRoborock Saros 10R Czarny\n\n\n\n \n\n\n\n\n\n\n (3)",
      "avg_text_length": 149.86666666666667,
      "specificity": 2,
      "classes": "box-row",
      "statistical_score": 84.61538461538461,
      "combined_confidence": 0.6730769230769231
    },
    {
      "selector": ".footer__main__section",
      "class_name": "footer__main__section",
      "count": 5,
      "depth": 5,
      "has_price": false,
      "has_link": true,
      "has_image": false,
      "has_product_links": false,
      "cart_elements": 0,
      "product_score": 35,
      "sample_text": "O Ceneo\n\n \n O nas\n \n \n Kontakt\n \n \n Prawne\n \n \n Mapa strony\n \n \n Serwisy partnerskie\n \n \n Polityka prywatno≈õci\n \n \n Kariera w Ceneo.pl",
      "avg_text_length": 127.2,
      "specificity": 1,
      "classes": "footer__main__section",
      "statistical_score": 54.1025641025641
    },
    {
      "selector": ".footer__main__section__list",
      "class_name": "footer__main__section__list",
      "count": 4,
      "depth": 6,
      "has_price": false,
      "has_link": true,
      "has_image": false,
      "has_product_links": false,
      "cart_elements": 0,
      "product_score": 25,
      "sample_text": "O nas\n \n \n Kontakt\n \n \n Prawne\n \n \n Mapa strony\n \n \n Serwisy partnerskie\n \n \n Polityka prywatno≈õci\n \n \n Kariera w Ceneo.pl",
      "avg_text_length": 97,
      "specificity": 1,
      "classes": "footer__main__section__list",
      "statistical_score": 53.717948717948715
    },
    {
      "selector": ".lnd_tint",
      "class_name": "lnd_tint",
      "count": 42,
      "depth": 6,
      "has_price": false,
      "has_link": false,
      "has_image": false,
      "has_product_links": false,
      "cart_elements": 0,
      "product_score": 10,
      "sample_text": "",
      "avg_text_length": 0,
      "specificity": 1,
      "classes": "lnd_tint",
      "statistical_score": 15.0
    },
    {
      "selector": ".footer__main__follow__social-list__item",
      "class_name": "footer__main__follow__social-list__item",
      "count": 6,
      "depth": 7,
      "has_price": false,
      "has_link": true,
      "has_image": false,
      "has_product_links": false,
      "cart_elements": 0,
      "product_score": 10,
      "sample_text": "Ceneo na Facebooku",
      "avg_text_length": 16.5,
      "specificity": 2,
      "classes": "footer__main__follow__social-list__item",
      "statistical_score": 14.487179487179485
    }
  ],
  "method": "dynamic_detection_llm",
  "transparency": {
    "statistical_analysis": {
      "recommended_depth": null,
      "confidence": 0.0,
      "reasoning": "Could not determine optimal depth from statistics",
      "alternatives": []
    },
    "candidates": {
      "total": 10,
      "top_5": [
        {
          "selector": ".box-row",
          "statistical_score": 84.61538461538461,
          "count": 15,
          "depth": 8
        },
        {
          "selector": ".footer__main__section",
          "statistical_score": 54.1025641025641,
          "count": 5,
          "depth": 5
        },
        {
          "selector": ".footer__main__section__list",
          "statistical_score": 53.717948717948715,
          "count": 4,
          "depth": 6
        },
        {
          "selector": ".lnd_tint",
          "statistical_score": 15.0,
          "count": 42,
          "depth": 6
        },
        {
          "selector": ".footer__main__follow__social-list__item",
          "statistical_score": 14.487179487179485,
          "count": 6,
          "depth": 7
        }
      ]
    },
    "llm_validation": {
      "used": true,
      "valid_count": 10,
      "reasoning": "Fallback due to error: Expecting value: line 63 column 19 (char 1987)"
    },
    "selection": {
      "selector": ".box-row",
      "method": "hybrid_llm_statistical",
      "confidence": 0.6730769230769231
    }
  }
}
```

üîç Step 3: Field Location Detection

   Analyzing fields in .box-row...

üîç Field Detection Results

```json
{
  "found": true,
  "fields": {
    "name": {
      "selector": "a.box",
      "sample": "MOVA Z60 Ultra Roller Complete czarny\n\n(1)\nod3 849"
    },
    "price": {
      "selector": "div.box-prod-price",
      "sample": "od1 481,40z≈Ç",
      "value": 1481.4
    },
    "url": {
      "selector": "a[href]",
      "sample": "https://www.ceneo.pl/48275120"
    }
  },
  "completeness": 1
}
```

üîç Step 4: Data Extraction

   Extracting up to 50 items using strategy...

üîç Extraction Results

```json
{
  "count": 2,
  "sample": [
    {
      "name": "Pan Materac Original Thermo 140x200\n\n(26)\nod1 481,40z≈Ç",
      "price": 1481.4,
      "url": "https://www.ceneo.pl/48275120"
    },
    {
      "name": "iPhone 17 Pro 256GB Deep Blue\n\n(95)\n5 699,00z≈Ç",
      "price": 5699,
      "url": "https://www.ceneo.pl/GotoBoxUrl?e=jCa73WFgMCNbGFziYyT-pv8v9HJVNCTwVIN4hgQ-7r_OSUkdT4ly0PYij-NBJliIVWqbwN8FDGGClEugWVKch2bH0quvyu0NoN2CFGk5bAv58RTZ8Z0pBpjG1P8RoNG9WWkGB_Yp0Xxw6RtZod4H8JevDXw1JkLzSLJYXujeJG96sOf-NbHqy2ebxJSFC-ZRQCzRUvwW9Tpv4OJzX5Mii88sdYHstrrUnBllHyn3jPQAVU9lBGjIaQ%3D%3D"
    }
  ]
}
```


üéØ ‚ïê‚ïê‚ïê MULTI-CRITERIA FILTERING ‚ïê‚ïê‚ïê


üìã Parsed Criteria

```json
{
  "summary": "No specific filters detected",
  "criteria": {}
}
```

‚ö†Ô∏è No specific filters detected in instruction

üìä Filtering Report

```json
{
  "original_count": 2,
  "filtered_count": 2,
  "criteria_summary": "N/A",
  "stages": 0
}
```


## üì∏ Extraction Screenshot


> `streamware.page.screenshot(path="screenshots/extraction_1764409800.png")`


![Extraction result](../screenshots/extraction_1764409800.png)


‚úÖ Iterative Extractor succeeded - found 2 items

Validation pass applied.

```json
{
  "products": [
    {
      "name": "iPhone 17 Pro 256GB Deep Blue\n\n(95)\n5 699,00z≈Ç",
      "price": 5699,
      "url": "https://www.ceneo.pl/GotoBoxUrl?e=jCa73WFgMCNbGFziYyT-pv8v9HJVNCTwVIN4hgQ-7r_OSUkdT4ly0PYij-NBJliIVWqbwN8FDGGClEugWVKch2bH0quvyu0NoN2CFGk5bAv58RTZ8Z0pBpjG1P8RoNG9WWkGB_Yp0Xxw6RtZod4H8JevDXw1JkLzSLJYXujeJG96sOf-NbHqy2ebxJSFC-ZRQCzRUvwW9Tpv4OJzX5Mii88sdYHstrrUnBllHyn3jPQAVU9lBGjIaQ%3D%3D"
    }
  ]
}
```

‚ö†Ô∏è  WARNING: Zero steps executed

‚úì SUCCESS: Task completed (0 steps taken)

‚úÖ Run finished successfully: Task completed successfully (0 steps taken)

